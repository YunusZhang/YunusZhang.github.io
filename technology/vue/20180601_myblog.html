<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>本博客搭建 | CKL</title>
    <meta name="description" content="">
    <link rel="icon" href="/img/logo.jpeg">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/2.10.0/github-markdown.min.css">
    
    <link rel="preload" href="/assets/css/0.styles.77d639ce.css" as="style"><link rel="preload" href="/assets/js/app.76659ae3.js" as="script"><link rel="preload" href="/assets/js/7.7c056201.js" as="script"><link rel="preload" href="/assets/js/37.d3f2b3c3.js" as="script"><link rel="prefetch" href="/assets/js/10.0524636a.js"><link rel="prefetch" href="/assets/js/11.947c16a3.js"><link rel="prefetch" href="/assets/js/12.51c4984b.js"><link rel="prefetch" href="/assets/js/13.ec23b4a0.js"><link rel="prefetch" href="/assets/js/14.0d704076.js"><link rel="prefetch" href="/assets/js/15.114d913b.js"><link rel="prefetch" href="/assets/js/16.94731e60.js"><link rel="prefetch" href="/assets/js/17.de3739c5.js"><link rel="prefetch" href="/assets/js/18.718702c6.js"><link rel="prefetch" href="/assets/js/19.44ce7a3e.js"><link rel="prefetch" href="/assets/js/2.38932ee6.js"><link rel="prefetch" href="/assets/js/20.95f77a6e.js"><link rel="prefetch" href="/assets/js/21.adc9ee61.js"><link rel="prefetch" href="/assets/js/22.1a4d3107.js"><link rel="prefetch" href="/assets/js/23.ab28b9fb.js"><link rel="prefetch" href="/assets/js/24.f0491f8c.js"><link rel="prefetch" href="/assets/js/25.ebff061e.js"><link rel="prefetch" href="/assets/js/26.fd399e9e.js"><link rel="prefetch" href="/assets/js/27.4634fdc1.js"><link rel="prefetch" href="/assets/js/28.0d72eb05.js"><link rel="prefetch" href="/assets/js/29.e20e7f51.js"><link rel="prefetch" href="/assets/js/3.a3a27c44.js"><link rel="prefetch" href="/assets/js/30.4ef1be23.js"><link rel="prefetch" href="/assets/js/31.af729026.js"><link rel="prefetch" href="/assets/js/32.b74e43bc.js"><link rel="prefetch" href="/assets/js/33.1fc9bd38.js"><link rel="prefetch" href="/assets/js/34.4c884e92.js"><link rel="prefetch" href="/assets/js/35.69ef4130.js"><link rel="prefetch" href="/assets/js/36.f9a6fa95.js"><link rel="prefetch" href="/assets/js/38.adb7b35e.js"><link rel="prefetch" href="/assets/js/39.ec26ba26.js"><link rel="prefetch" href="/assets/js/4.dd247e61.js"><link rel="prefetch" href="/assets/js/40.3f22cde7.js"><link rel="prefetch" href="/assets/js/41.a85c18e6.js"><link rel="prefetch" href="/assets/js/5.b42ba372.js"><link rel="prefetch" href="/assets/js/6.1a1baeca.js"><link rel="prefetch" href="/assets/js/8.43850db6.js"><link rel="prefetch" href="/assets/js/9.cb094fa1.js">
    <link rel="stylesheet" href="/assets/css/0.styles.77d639ce.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.jpeg" alt="CKL" class="logo"> <span class="site-name can-hide">CKL</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/timeLine/" class="nav-link">首页</a></div><div class="nav-item"><a href="/technology/" class="nav-link router-link-active">技术</a></div><div class="nav-item"><a href="/life/" class="nav-link">生活</a></div><div class="nav-item"><a href="/ponder/" class="nav-link">思考</a></div><div class="nav-item"><a href="/tags/" class="nav-link">标签库</a></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div> <!----></nav> <div style="display:none;">
   音乐
  <div role="switch" class="el-switch"><input type="checkbox" name="" true-value="true" class="el-switch__input"><!----><span class="el-switch__core" style="width:40px;"></span><!----></div> <audio loop="loop"><source src="/assets/media/yui - you.e3d66957.mp3" type="audio/mpeg"></audio></div></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/timeLine/" class="nav-link">首页</a></div><div class="nav-item"><a href="/technology/" class="nav-link router-link-active">技术</a></div><div class="nav-item"><a href="/life/" class="nav-link">生活</a></div><div class="nav-item"><a href="/ponder/" class="nav-link">思考</a></div><div class="nav-item"><a href="/tags/" class="nav-link">标签库</a></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>本博客搭建</span> <!----></p> <ul class="sidebar-group-items"></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="vuepress简介"><a href="#vuepress简介" class="header-anchor">#</a> VuePress简介</h1> <p>GitHub Pages提供的静态页面托管服务（国内也可以考虑码云提供的Gitee Pages）
VuePress静态网站生成器
VuePress是Vue作者尤大的一个作品，其实是用来写文档的，但有vue生态的加持，扩展能力非常强，也很适合搭建博客。VuePress有很多优秀的特性，其可以在md文件中引用vue组件的能力尤其让我痴迷。vuepress其原理与现代前端项目是一致的，基于node平台、webpack驱动的开发方式，打包后为静态页面，可以发布到任意静态服务器上。</p> <p>官方的描述：
事实上，一个 VuePress 网站是一个由 Vue、Vue Router 和 webpack 驱动的单页应用。如果你以前使用过 Vue 的话，当你在开发一个自定义主题的时候，会感受到非常熟悉的开发体验，你甚至可以使用 Vue DevTools 去调试你的自定义主题。</p> <p>在构建时，我们会为应用创建一个服务端渲染（SSR）的版本，然后通过虚拟访问每一条路径来渲染对应的HTML。这种做法的灵感来源于 Nuxt 的 nuxt generate 命令，以及其他的一些项目，比如 Gatsby。</p> <p>如官方所述，部署版本会采用服务端渲染的方式打包静态资源，这是为了更好的SEO和加载速度。对SEO、SPA-&gt;SSR不太了解的朋友可以查一下相关的资料，并且在部署之后，可以体会一下开发模式下和生产版本下，网络响应的差异。</p> <h1 id="vuepress安装步骤"><a href="#vuepress安装步骤" class="header-anchor">#</a> VuePress安装步骤</h1> <p>包管理工具，建议使用yarn代替npm，但如果网络情况不好(部署的时候很慢不知道是不是此原因)，可以使用tyarn，是国内某宝的镜像源，建议不要使用cnpm，有点问题。</p> <p>VuePress官方文档有很详尽的安装教程，这里就搬运一下：</p> <div class="language- extra-class"><pre class="language-text"><code>
# node 要求 8以上 

# 或者：npm install -g vuepress
yarn global add vuepress 

# 创建vuepress的工程路径
mkdir myblog
cd myblog

# 工程初始化
yarn init -y # 或者 npm init -y

# 文档路径
mkdir docs

# .vuepress目录
cd docs
mkdir .vuepress

# config.js
cd .vuepress
touch config.js

# public目录
mkdir public

# 设置package.json的脚本配置
  &quot;scripts&quot;: {
    &quot;dev&quot;: &quot;vuepress dev docs&quot;,
    &quot;build&quot;: &quot;vuepress build docs&quot;
  }
</code></pre></div><p>完成后的工作目录如下：</p> <div class="language- extra-class"><pre class="language-text"><code>myblog
├─── docs
│   ├── README.md
│   └── .vuepress
│       ├── public
│       └── config.js
└── package.json
</code></pre></div><p>这是vuepress最基本目录结构，其中config.js是网站的基本配置信息，详细配置内容请见官方文档:配置。用vuepress写文档或者博客，其实就是写一个md文件，并将这个文件的路径通过config.js中的路由配置绑定在菜单中，这是它的基本使用方式。</p> <p>这里插一句，在学习一门新框架或者新工具的时候，遇事不觉，官方文档</p> <h1 id="修改默认主题"><a href="#修改默认主题" class="header-anchor">#</a> 修改默认主题</h1> <p>环境搭建好以后，无需过多的配置，运行npm run dev 就可以访问自己的博客了，如果只是是记录文档，默认的完全符合要求，简洁大方，但如果是做个人博客，一定是需要个性化的东西的。官方文档中，提供了修改默认主题的方式：</p> <p>你可以使用 vuepress eject [targetDir] 这个命令来将默认主题的源码复制到 .vuepress/theme 文件夹下，从而可以对默认主题进行任意的修改。需要注意的是一旦 eject，即使升级 VuePress 你也无法再获得 VuePress 对默认主题的更新。</p> <p>下载下来的theme文件夹要放在.vuepress/路径下,做过vue的人，或者有一些前端基础的人，打开这个文件夹，你就会看到vuepress的所有细节，你会看到Home、Layout、Navbar、Sidebar这样如此熟悉的字眼，你可以对样式做任意的修改。</p> <p>我觉得这样式就挺好，没有对自己的博客做过多的改造</p> <h1 id="ui组件"><a href="#ui组件" class="header-anchor">#</a> UI组件</h1> <p>vuepress支持扩展，支持引入第三方组件，在.vuepress/下创建enhanceApp.js文件，这里引入vue生态圈比较知名的ui库Element,来自于某外卖厂</p> <div class="language- extra-class"><pre class="language-text"><code>/**
 * 扩展 VuePress 应用
 */
import Element from 'element-ui'
import 'element-ui/lib/theme-chalk/index.css'

export default ({
  Vue, 
}) =&gt; {
  // ...做一些其他的应用级别的优化
  Vue.use(Element)
}
</code></pre></div><p>当然，在这之前，需要先安装element。</p> <div class="language- extra-class"><pre class="language-text"><code>yarn add element-ui
</code></pre></div><div style="color:red">
注意：这里出现了第一个坑
</div> <p>(先cd到项目目录下？？)</p> <p>我先用 npm install element-ui@2.7.2</p> <p>发现安装之后有报错（因为我的package.json 文件中以前是2.7.2所以我以为也要下载这个版本）</p> <p>修改：npm install element-ui</p> <p>默认安装最新的版本（package.json 文件中也会自动转为最新的版本）</p> <p>在扩展之后，就可以在自定义的组件或者md文件中，使用element的组件了。</p> <h1 id="组件开发"><a href="#组件开发" class="header-anchor">#</a> 组件开发</h1> <p>vuepress可以在md中可以使用vue组件及语法</p> <p>如果我们需要开发自己的组件，那么在.vuepress下新建components文件夹，可以在里面编写.vue，与vue-cli开发无异，而且，组件是全局注册的，组件之间互相调用，不用手动引入，在md文件、theme中都可以使用。</p> <h1 id="博客的自动路由"><a href="#博客的自动路由" class="header-anchor">#</a> 博客的自动路由</h1> <p>vuepress其实是一个文档管理的方案，假如我们做一套开源库api文档，修改与添加文档不会很频繁，所以，采用在config.js中配置路由的形式是很可取，很简单的。比如：</p> <div class="language- extra-class"><pre class="language-text"><code>// .vuepress/config.js
module.exports = {
  themeConfig: {
    sidebar: {
      '/foo/': [
        '',     /* /foo/ */
        'one',  /* /foo/one.html */
        'two'   /* /foo/two.html */
      ],

      '/bar/': [
        '',      /* /bar/ */
        'three', /* /bar/three.html */
        'four'   /* /bar/four.html */
      ],

      // fallback
      '/': [
        '',        /* / */
        'contact', /* /contact.html */
        'about'    /* /about.html */
      ]
    }
  }
}
</code></pre></div><p>对于元数据的使用，参考组件BlogList</p> <h1 id="标签墙"><a href="#标签墙" class="header-anchor">#</a> 标签墙</h1> <p>标签墙的实现通过元数据的tags设置标签，在BlogList中，遍历$pages，匹配其中的tag。 页面可以参照组件Tags</p> <h1 id="评论功能"><a href="#评论功能" class="header-anchor">#</a> 评论功能</h1> <p>评论功能的集成，使用的是网上比较流行的valine组件：</p> <div class="language- extra-class"><pre class="language-text"><code>yarn add leancloud-storage
yarn add valine
</code></pre></div><p>对于组件的封装可以参见Valine.vue,</p> <div class="language- extra-class"><pre class="language-text"><code>
    new Valine({
      el: '#vcomments' ,
      appId: '',// your appId
      appKey: '', // your appKey
      notify:true, 
      verify:false, 
      avatar:'mm', 
      placeholder: 'just go go' 
    });
</code></pre></div><p>其中 appid 与appkey 需要在leancloud中注册获得。</p> <p>详细的内容，原作者有详尽的说明：云淡风轻</p> <div style="color:red">
注意：这里出现了第二个坑
</div> <p>这个功能确实强大，但是需要实名验证，交费啥的，挺麻烦，现阶段个人使用不太需要，暂时不用；但是如果不填的话，编译的时候会报错；</p> <p>我的做法是：去除这个模块，和这个功能模块相关的东西全部删掉，也许有开关啥的，我没有深究</p> <h1 id="githubpages部署"><a href="#githubpages部署" class="header-anchor">#</a> GitHubPages部署</h1> <p>在你的个人博客已经创建就绪之后，我们需要做的就是发布它，这需要以下几步：</p> <p>本机安装git，有github账号，这一点不赘述。</p> <p>创建一个 “用户名.github.io” 这样的仓库，</p> <p>进入仓库 ，在settings中，找到 github pages的设置。</p> <p>github官方是给提供模板的，可以先选一个，在替换成我们的个人博客的时候，要把分支先pull下来，清除原有文件。</p> <p>也可以直接在仓库根路径下方一个index.html,随便写点内容，以验证我们的页面是否可以访问</p> <p>以上步骤网上资料非常多，善用百度。在一切准备就绪之后，可以试试浏览器直接访问自己的主页：用户名.github.io。</p> <p>之后的事情，我们可以写一个自动发布的脚本：</p> <div class="language- extra-class"><pre class="language-text"><code># 构建
npm run build
# 导航到构建输出目录
cd docs/.vuepress/dist

git init
git add -A
git commit -m 'deploy'

# 推到你仓库的 master 分支
git push -f git@github.com:yourname/yourname.github.io.git master

</code></pre></div><p>我的自动脚本</p> <div class="language- extra-class"><pre class="language-text"><code># 自动部署脚本  

#!/usr/bin/env sh

# 确保脚本抛出遇到的错误
set -e


# 构建
npm run build
# 导航到构建输出目录
cd docs/.vuepress/dist

git init
git add -A
git commit -m 'deploy'

# 推到你仓库的 master 分支

git push -f git@github.com:yourname/yourname.github.io.git master


cd -
</code></pre></div><p>参考文章：
https://www.cnblogs.com/softidea/p/10084946.html</p> <p>build之后，默认会将静态打包文件放在.vuepress/dist下，我们只需把这个文件夹里的内容提交到仓库里即可。</p> <p>每次写了新博客，都可以通过这个脚本发布。</p> <p>每次发布只需要在对应的目录添加md文件，然后切换到对应的仓库下</p> <p>cd /yourProject/</p> <p>npm run deploy</p> <p>每次发布之后记得到githubpage设置界面重新绑定下域名，因为每次发布，他会重制下</p> <h1 id="nginx部署"><a href="#nginx部署" class="header-anchor">#</a> Nginx部署</h1> <p>更推荐的方式还是服务器部署，国内暂时不支持githubpages的SEO。所以，如果你想让你的文章可以被大众搜索到，最好还是弄一台服务器。腾讯云有校园优惠，首次购买腾讯云产品，可以享受1核2G一年120元的优惠。部署个nginx，可以了。</p> <p>通过nginx部署静态网站的资料，网上非常多，请善用百度。</p> <h1 id="绑定域名"><a href="#绑定域名" class="header-anchor">#</a> 绑定域名</h1> <p>到这一步，博客已经可以通过url： ***.github.io（或者云服务器的IP） 访问了。</p> <p>但是最好要有一个自己的域名。 在购买域名的时候，需要上传个人信息的，住址、身份证信息等，相关部门以及机构需要登记审核。但审核期间完全可以正常使用，如果审核未通过，则会被停用。 在购买域名后，需要配置域名解析，这也就是花钱买域名的意义，通过dns,将买来的域名解析到github pages上。如何设置，可以参考我的上一篇博客</p> <h1 id="结语"><a href="#结语" class="header-anchor">#</a> 结语</h1> <p>这个项目还挺方便的，很简洁，没有太多时间雕琢，比较简陋，仅当记录自已的一个工具。</p></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/app.76659ae3.js" defer></script><script src="/assets/js/7.7c056201.js" defer></script><script src="/assets/js/37.d3f2b3c3.js" defer></script>
  </body>
</html>
