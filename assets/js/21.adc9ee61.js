(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{328:function(t,e,n){"use strict";n.r(e);var s=n(1),a=Object(s.a)({},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),n("p",[t._v("假设我们有600个用户, 由于要使用试验中获得的知识, 因此只对其中的300人进行测试. 根据试验结果,那么就只能对剩下的300人采用更有效的营销形式.")]),t._v(" "),n("p",[t._v("我们把要测试的300人分成A,B两组:A组会收到与往常一样的邮件, 最上面又一张大图;B组会收到没有图片的邮件.希望简洁的邮件不会让用户认为是垃圾邮件,还能鼓励用户点击其中的内容.")]),t._v(" "),t._m(2),t._v(" "),n("p",[t._v("根据目前已有的数据,有以下合理预期:对于任何给定的邮件,链接点击率在30%左右;以下为步骤")]),t._v(" "),n("p",[t._v("A)为了简单起见,我们对两个变体使用相同的先验概率.")]),t._v(" "),n("p",[t._v("B)我们还将选择一个较弱的先验的分布,这意味着转化率的概率范围很大,之所以选择一个较弱的先验,是因为我们不知道期待的变体B会表现的怎样,而且这是一个新的活动,所以其他因素也会影响转化率,结果有可能更好也有可能更差;")]),t._v(" "),n("p",[t._v("C)这里我们用Beta(3,7)作为先验概率分布, 这个贝塔分布的均值是0.3,而且能够表示转化率的概率范围很大.")]),t._v(" "),n("p",[t._v("D)这一步需要的是似然,意味着需要去搜集数据")]),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),n("p",[t._v("A)我们可以将这两个变体视为想要估计的单独参数,为了得到每个变体的后验分布,需要分别结合他们各自的似然分布和先验分布.")]),t._v(" "),n("p",[t._v("B)这里这些变体的先验分布是Beta(3,7), 它代表一个相对较弱的信念,即在没有额外信息的情况下,我们对转化率的可能期望值较低.之所以说这是一个较弱的信念,是因为我们并不十分相信某个特定的数值范围,而是考虑了具有高概率的所有可能的转化率.")]),t._v(" "),n("p",[t._v("C)对每个变体的似然,我们也同样使用贝塔分布,其中参数a等于链接被点击的次数.")]),t._v(" "),n("p",[t._v("回顾:\n"),n("font",{attrs:{color:"red"}},[t._v("\nBeta(a后验,b后验)=Beta(a先验+b似然, b先验+b似然)\n")])],1),t._v(" "),n("p",[t._v("因此,变体A用分布Beta(3+36,7+114)来表示;")]),t._v(" "),n("p",[t._v("变体B用分布Beta(3+50,7+150)来表示")]),t._v(" "),n("p",[t._v("如下图:")]),t._v(" "),n("p",[t._v("具体代码:")]),t._v(" "),t._m(5)])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{attrs:{id:"构建贝叶斯ab测试"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#构建贝叶斯ab测试"}},[this._v("#")]),this._v(" 构建贝叶斯AB测试")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"_1-例子"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-例子"}},[this._v("#")]),this._v(" 1 例子")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"_2-找出先验概率"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-找出先验概率"}},[this._v("#")]),this._v(" 2 找出先验概率")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"_3-搜集数据"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-搜集数据"}},[this._v("#")]),this._v(" 3 搜集数据")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("table",[n("thead",[n("tr",[n("th",{staticStyle:{"text-align":"left"}}),t._v(" "),n("th",{staticStyle:{"text-align":"left"}},[t._v("点击")]),t._v(" "),n("th",{staticStyle:{"text-align":"left"}},[t._v("未点击")]),t._v(" "),n("th",{staticStyle:{"text-align":"left"}},[t._v("观察到的转化率")])])]),t._v(" "),n("tbody",[n("tr",[n("td",{staticStyle:{"text-align":"left"}},[t._v("A")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("36")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("114")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("0.24")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[t._v("B")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("50")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("100")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("0.33")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("from scipy.stats import beta\nimport os\n\n\nalpha_prior=3\nbeta_prior=7\n\nconversions_from_A=36\nconversions_from_B=50\n\nvisitors_to_A=150\nvisitors_to_B=150\n\n\nposterior_A=beta(alpha_prior+conversions_from_A,beta_prior+visitors_to_A-conversions_from_A)\nposterior_B=beta(alpha_prior+conversions_from_B,beta_prior+visitors_to_B-conversions_from_B)\n\n\n'''\n\n#用采样来判断哪个组的转化率更高\nsamples=20000\nsamples_posterior_A=posterior_A.rvs(samples)\nsamples_posterior_B=posterior_B.rvs(samples)\n\n\n#print('dd')\naa=samples_posterior_A\nbb=samples_posterior_B\nprint(aa)\nprint(bb)\n#print((samples_posterior_A > samples_posterior_B).mean()) #注意这里的mean()要在print括号里面\n\n\n\n'''\n\n\nfrom IPython.core.pylabtools import figsize\nfrom matplotlib import pyplot as plt\nimport numpy as np\n\n\nfigsize(12.5, 4)\n\n#这里的dpi可以控制图片的大小\nplt.rcParams['savefig.dpi']=100\nplt.rcParams['figure.dpi']=100\n\nx=np.linspace(0,1,500)\nplt.plot(x,posterior_A.pdf(x),label='posterior of A')\nplt.plot(x,posterior_B.pdf(x),label='posterior of B')\n\nplt.xlabel('Value')\nplt.ylabel('Density')\nplt.title(\"Posterior of distributions of the conversion rates of Web page $A$ and $B$\")\n\n\n#给图像加上图例\nplt.legend()\n\n\n'''\n#保存图片在文件夹\nfigure_save_path=\"file_fig\"\nif not os.path.exists(figure_save_path):\n    os.makedirs(figure_save_path)\n\nplt.savefig(os.path.join(figure_save_path,'abTest1.jpg'))\n\n\n'''\n\n\n\n\n\n\nplt.show() \n\n\n\n\n\n")])])])}],!1,null,null,null);e.default=a.exports}}]);